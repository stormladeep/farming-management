<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Financial Report & Invoice</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script> <!-- jsPDF library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            padding: 20px;
            background-image: url('./report.jpg'); /* Replace with your image URL */
            background-size: cover; /* Make the image cover the whole page */
            background-position: center; /* Center the background image */
            background-repeat: no-repeat; /* Ensure the image does not repeat */
        }

        h1, h2 {
            color: #2c3e50;
        }

        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 20px 0;
        }

        .table th, .table td {
            text-align: left;
        }

        #downloadReportBtn, #downloadInvoiceBtn {
            margin: 20px 0;
        }

        .thank-you-note {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.2em;
        }
    </style>
</head>

<body>
    
    <div class="container">
        <h1 class="text-center my-4">Farm Financial Report</h1>

        <!-- Download Report Button -->
        <button id="downloadReportBtn" class="btn btn-primary">Download Report as PDF</button>

        <div class="report-section card mb-4" id="reportContent">
            <div class="card-body">
                <h2 class="card-title">Expense Reports</h2>
                <table class="table table-striped table-bordered mt-3" id="expenseTable">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Amount ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Seeds</td>
                            <td>5000</td>
                        </tr>
                        <tr>
                            <td>Fertilizer</td>
                            <td>3000</td>
                        </tr>
                        <tr>
                            <td>Equipment</td>
                            <td>10000</td>
                        </tr>
                        <tr>
                            <td>Labour</td>
                            <td>15000</td>
                        </tr>
                    </tbody>
                </table>
                <div class="chart-container">
                    <canvas id="expenseChart"></canvas>
                </div>
            </div>
        </div>

        <div class="report-section card mb-4">
            <div class="card-body">
                <h2 class="card-title">Revenue Reports</h2>
                <table class="table table-striped table-bordered mt-3" id="revenueTable">
                    <thead>
                        <tr>
                            <th>Source</th>
                            <th>Amount ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Crop Sales</td>
                            <td>50000</td>
                        </tr>
                        <tr>
                            <td>Livestock</td>
                            <td>30000</td>
                        </tr>
                        <tr>
                            <td>Other</td>
                            <td>5000</td>
                        </tr>
                    </tbody>
                </table>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </div>

        <div class="report-section card mb-4">
            <div class="card-body">
                <h2 class="card-title">Profit & Loss Statement</h2>
                <table class="table table-striped table-bordered mt-3">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Amount ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Total Revenue</td>
                            <td>85000</td>
                        </tr>
                        <tr>
                            <td>Total Expenses</td>
                            <td>33000</td>
                        </tr>
                        <tr>
                            <td><strong>Net Profit</strong></td>
                            <td><strong>52000</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="report-section card mb-4">
            <div class="card-body">
                <h2 class="card-title">Yield Reports</h2>
                <table class="table table-striped table-bordered mt-3">
                    <thead>
                        <tr>
                            <th>Crop</th>
                            <th>Yield (tons)</th>
                            <th>Input Cost ($)</th>
                            <th>Yield per $ Input</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Corn</td>
                            <td>500</td>
                            <td>10000</td>
                            <td>0.05</td>
                        </tr>
                        <tr>
                            <td>Wheat</td>
                            <td>300</td>
                            <td>8000</td>
                            <td>0.0375</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="report-section card mb-4">
            <div class="card-body">
                <h2 class="card-title">Labour Reports</h2>
                <table class="table table-striped table-bordered mt-3">
                    <thead>
                        <tr>
                            <th>Task</th>
                            <th>Hours Worked</th>
                            <th>Cost ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Planting</td>
                            <td>200</td>
                            <td>4000</td>
                        </tr>
                        <tr>
                            <td>Harvesting</td>
                            <td>300</td>
                            <td>6000</td>
                        </tr>
                        <tr>
                            <td>Maintenance</td>
                            <td>250</td>
                            <td>5000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <h1 class="text-center my-4">Farm Invoice</h1>
        
        <div class="invoice-details mb-4">
            <h2>Invoice to:</h2>
            <p><strong>Client Name:</strong> John Doe</p>
            <p><strong>Address:</strong> 123 Farm Road, Farmingville, CA</p>
            <p><strong>Date:</strong> <span id="invoiceDate"></span></p>
        </div>

        <div class="report-section card mb-4">
            <div class="card-body">
                <h2 class="card-title">Invoice Items</h2>
                <table class="table table-striped table-bordered mt-3" id="invoiceTable">
                    <thead>
                        <tr>
                            <th>Item Description</th>
                            <th>Quantity</th>
                            <th>Unit Price ($)</th>
                            <th>Total ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Seeds</td>
                            <td>1</td>
                            <td>5000</td>
                            <td>5000</td>
                        </tr>
                        <tr>
                            <td>Fertilizer</td>
                            <td>1</td>
                            <td>3000</td>
                            <td>3000</td>
                        </tr>
                        <tr>
                            <td>Equipment</td>
                            <td>1</td>
                            <td>10000</td>
                            <td>10000</td>
                        </tr>
                        <tr>
                            <td>Labour</td>
                            <td>1</td>
                            <td>15000</td>
                            <td>15000</td>
                        </tr>
                        <tr>
                            <td><strong>Subtotal</strong></td>
                            <td colspan="2"></td>
                            <td><strong>32000</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Tax (10%)</strong></td>
                            <td colspan="2"></td>
                            <td><strong>3200</strong></td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td colspan="2"></td>
                            <td><strong>35200</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <button id="downloadInvoiceBtn" class="btn btn-primary">Download Invoice as PDF</button>

        <div class="thank-you-note">Thank you for your business!</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date in the invoice
            const today = new Date().toLocaleDateString();
            document.getElementById('invoiceDate').textContent = today;

            // Create Expense Chart
            const expenseCtx = document.getElementById('expenseChart').getContext('2d');
            const expenseChart = new Chart(expenseCtx, {
                type: 'pie',
                data: {
                    labels: ['Seeds', 'Fertilizer', 'Equipment', 'Labour'],
                    datasets: [{
                        label: 'Expenses',
                        data: [5000, 3000, 10000, 15000],
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Expense Distribution'
                        }
                    }
                }
            });

            // Create Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Crop Sales', 'Livestock', 'Other'],
                    datasets: [{
                        label: 'Revenue',
                        data: [50000, 30000, 5000],
                        backgroundColor: '#36A2EB',
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Revenue Distribution'
                        }
                    }
                }
            });

            // Function to download the report as a PDF
            document.getElementById('downloadReportBtn').addEventListener('click', function() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                doc.text("Farm Financial Report", 20, 20);
                doc.text("Expense Reports", 20, 30);
                doc.autoTable({ html: '#expenseTable', startY: 35 });
                doc.addPage();
                doc.text("Revenue Reports", 20, 30);
                doc.autoTable({ html: '#revenueTable', startY: 35 });
                doc.addPage();
                doc.text("Profit & Loss Statement", 20, 30);
                doc.autoTable({ html: '#profitLossTable', startY: 35 });
                doc.addPage();
                doc.text("Yield Reports", 20, 30);
                doc.autoTable({ html: '#yieldTable', startY: 35 });
                doc.addPage();
                doc.text("Labour Reports", 20, 30);
                doc.autoTable({ html: '#labourTable', startY: 35 });

                doc.save('farm_financial_report.pdf');
            });

            // Function to download the invoice as a PDF
            document.getElementById('downloadInvoiceBtn').addEventListener('click', function() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                doc.text("Farm Invoice", 20, 20);
                doc.text(`Client Name: John Doe`, 20, 30);
                doc.text(`Address: 123 Farm Road, Farmingville, CA`, 20, 40);
                doc.text(`Date: ${today}`, 20, 50);
                doc.autoTable({ html: '#invoiceTable', startY: 60 });
                doc.save('farm_invoice.pdf');
            });
        });
    </script>
</body>

</html>
